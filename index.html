<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="tappedout.github.com/api : TappedOut" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>tappedout.github.com/api</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/TappedOut">View on GitHub</a>

          <h1 id="project_title">tappedout.github.com/api</h1>
          <h2 id="project_tagline">TappedOut</h2>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="welcome" class="anchor" href="#welcome"><span class="octicon octicon-link"></span></a>Welcome</h1>

<h1>
<a name="tappedoutjs" class="anchor" href="#tappedoutjs"><span class="octicon octicon-link"></span></a>tappedout.js</h1>

<p>The widget can be included on any page.  It is designed around the idea of being sandboxed and not effecting any other functionality on the site it is included on.</p>

<p>Just add this script tag to your website.</p>

<pre><code>&lt;script src="http://tappedout.net/tappedout.js"&gt;&lt;/script&gt;
</code></pre>

<p>The parser will strip existing html and use a line by line evaluation of the contents to submit to tapped out for proper formatting.</p>

<h2>
<a name="explicit-use" class="anchor" href="#explicit-use"><span class="octicon octicon-link"></span></a>Explicit Use</h2>

<p>Elements with the class deck-list will be evaluated, parsed and built out.</p>

<p>Valid code:</p>

<pre><code>&lt;div class="deck-list"&gt;
    1x Card Name
    99 Card Name 2
    Ignored line
    9999x Card Name 3

    Sideboard|sideboard|Sideboard:
    2x
&lt;/div&gt;
</code></pre>

<p>Numbers in a explicit block can be followed optionally by 'x'.  The word sideboard on its own line designates the following items are sideboard items. Lines starting with neither a number nor sideboard are ignored and removed in the final rendering.</p>

<h2>
<a name="explicit-use-2" class="anchor" href="#explicit-use-2"><span class="octicon octicon-link"></span></a>Explicit Use 2</h2>

<p>Additionally, if you want to show off a deck you created on tapped out, you can do the following:</p>

<pre><code>&lt;div class="deck-list" data-stub="theres-a-sliver-for-that"&gt;&amp;nbsp;&lt;/div&gt;
</code></pre>

<p>Where the data-stub attributes contains your deck's stub.</p>

<div>Â </div>

<h2>
<a name="implicit-use" class="anchor" href="#implicit-use"><span class="octicon octicon-link"></span></a>Implicit Use</h2>

<p>The widget will search for blockquote tags on your page.  If it finds one and the block contains a line that begins with a number followed by x, it will attempt to parse the content just like the explicit use.</p>

<pre><code>&lt;blockquote&gt;
    12x Serra Angel
&lt;/blockquote&gt;
</code></pre>

<p>This will not parse:</p>

<pre><code>&lt;blockquote&gt;
    12 Serra Angel
&lt;/blockquote&gt;
</code></pre>

<h1>
<a name="api-key-concepts" class="anchor" href="#api-key-concepts"><span class="octicon octicon-link"></span></a>API Key Concepts</h1>

<h2>
<a name="cardspec" class="anchor" href="#cardspec"><span class="octicon octicon-link"></span></a>CardSpec</h2>

<p>A CardSpec is a representation of a card. Its a map, a hash, or a dict,
depending on the language. It can contain information, such as image, of
a specific printing, but it defaults to the latest one.</p>

<p>In general, where CardSpecs are returned by any API, you may passcard_fields=['attr',...']
as a GET variable to restrict the response to only those you care about.</p>

<pre><code>{
    "name": "Demonic Tutor",
    "slug": "demonic-tutor",
    "image_large": "http://...",
    "tapped_url": "http://tappedout.net/mtg-card/demonic-tutor/",
    "wizards_url": "...",
}
</code></pre>

<h1>
<a name="api-endpoints" class="anchor" href="#api-endpoints"><span class="octicon octicon-link"></span></a>API Endpoints</h1>

<h2>
<a name="validatortappedoutnet" class="anchor" href="#validatortappedoutnet"><span class="octicon octicon-link"></span></a>validator.tappedout.net</h2>

<h3>
<a name="check-for-format-of-a-single-card" class="anchor" href="#check-for-format-of-a-single-card"><span class="octicon octicon-link"></span></a>Check for format of a single card</h3>

<p><a href="http://validator.tappedout.net/validate/?cards=%5B%22Black%20Lotus%22%5D">/validate/?cards=["Black Lotus"]</a></p>

<h3>
<a name="check-format-for-list-of-cards" class="anchor" href="#check-format-for-list-of-cards"><span class="octicon octicon-link"></span></a>Check format for list of cards</h3>

<p><a href="http://validator.tappedout.net/validate/?cards=%5B%22llanowar%20elves%22,%22phyrexian%20dreadnought%22%5D">/validate/?cards=["llanowar elves","phyrexian dreadnought"]</a>  </p>

<h3>
<a name="validate-format-of-a-list-of-cards" class="anchor" href="#validate-format-of-a-list-of-cards"><span class="octicon octicon-link"></span></a>Validate format of a list of cards</h3>

<p><a href="http://validator.tappedout.net/validate/?cards=%5B%22llanowar%20elves%22,%22phyrexian%20dreadnought%22%5D&amp;format=standard">/validate/?cards=["llanowar elves","phyrexian dreadnought"]&amp;format=standard</a></p>

<h2>
<a name="mtg-resources" class="anchor" href="#mtg-resources"><span class="octicon octicon-link"></span></a>MTG Resources</h2>

<h3>
<a name="mtg-set-booster-public" class="anchor" href="#mtg-set-booster-public"><span class="octicon octicon-link"></span></a>MTG Set Booster [Public]</h3>

<p>Returns a response that's like opening a pack of cards.</p>

<p>URI: /api/mtg/boosters/?tla=count&amp;pack_size=X [GET]</p>

<p>pack_size can be [14, 15], defaults to 15</p>

<pre><code>/api/mtg/booster/?rav=10&amp;m10=5
/api/mtg/booster/?rav=3&amp;m10=3&amp;9ed=4&amp;pack_size=14
</code></pre>

<p>Response:  JSON map of the sets given, mapped to their packs (a list of CardSpecs). </p>

<pre><code>{  
   "set": [  # Pack: List of CardSpec (see above)
        {"card_name": "Demonic Tutor" ... },
        {"card_name": "Phyrexian Dreadnought" ... },
   ]
}
</code></pre>

<h3>
<a name="card-detail--developer-token" class="anchor" href="#card-detail--developer-token"><span class="octicon octicon-link"></span></a>Card Detail  (Developer Token)</h3>

<p>URI /api/mtg/[card slug]/ [GET]</p>

<p>Response with a CardSpec</p>

<h2>
<a name="deck-resources" class="anchor" href="#deck-resources"><span class="octicon octicon-link"></span></a>Deck Resources</h2>

<h3>
<a name="latest-decks-public" class="anchor" href="#latest-decks-public"><span class="octicon octicon-link"></span></a>Latest Decks [Public]</h3>

<p>URI /api/deck/latest/[list name]/ [GET]</p>

<p>List name is a slug (lower case, hyphens replace spaces) and can flexibly be either</p>

<ul>
<li>Any of: 'top8', 'featured', 'latest', 'top8-latest'</li>
<li>An MTG Format name</li>
<li>A Deck Hub name (See <a href="http://tappedout.net/mtg-deck-builder/">http://tappedout.net/mtg-deck-builder/</a>)</li>
<li>A Card name</li>
</ul><h2>
<a name="collection-resources" class="anchor" href="#collection-resources"><span class="octicon octicon-link"></span></a>Collection Resources</h2>

<h3>
<a name="collection-list-public-with-cookie-or-api-key" class="anchor" href="#collection-list-public-with-cookie-or-api-key"><span class="octicon octicon-link"></span></a>Collection List [Public with cookie or API Key]</h3>

<p>URI: /api/collection/collection/  <a href="all%20of%20all%20types">GET</a>
URI: /api/collection/collection:[deck/cube/list/binder]/  <a href="all%20of%20type">GET</a></p>

<p>Response:</p>

<pre><code>"deck": [
    {"user_display": "&lt;font color=\"black\"&gt;yea&lt;/font&gt;&lt;font color=\"red\"&gt;GO!&lt;/font&gt;",
     "name": "DOMINARIA - Tolaria [D10.1a] copy", 
     "url": "http://tappedout.net/mtg-decks/dominaria-tolaria-d101a-copy/", 
     "inventory": [["Tolaria West", {"b": "main", "qty": 1}], ...]}
"cube": [
    {.....]
</code></pre>

<h3>
<a name="collection-detail-public-with-cookie-or-api-key" class="anchor" href="#collection-detail-public-with-cookie-or-api-key"><span class="octicon octicon-link"></span></a>Collection Detail [Public with cookie or API Key]</h3>

<p>URI: /api/collection:deck/dominaria-tolaria-d101a-copy/  [GET]</p>

<p>you may pass card_fields GET variable to get a subset of inventory</p>

<p>Response:</p>

<pre><code> {"user_display": "&lt;font color=\"black\"&gt;yea&lt;/font&gt;&lt;font color=\"red\"&gt;GO!&lt;/font&gt;",
  "name": "DOMINARIA - Tolaria [D10.1a] copy", 
  "url": "http://tappedout.net/mtg-decks/dominaria-tolaria-d101a-copy/", 
  "inventory": [["Tolaria West", {"b": "main", "qty": 1}], ...]}
</code></pre>

<h3>
<a name="inventory-public-with-cookie" class="anchor" href="#inventory-public-with-cookie"><span class="octicon octicon-link"></span></a>Inventory [Public with cookie]</h3>

<p>Allows you to change inventory of a collection on TappedOut. You must have a TappedOut
cookie, so this mostly only works on client-side calls by logged-in users.</p>

<p>URI: /api/collection/<em>collection_type</em>/<em>collection_slug</em>/inventory/ [PUT]</p>

<ul>
<li>   collection_type [deck, cube, binder, list]</li>
<li>   collection_slug - for decks, cubes, lists, the slug. for binder, the username</li>
</ul><h4>
<a name="put--json-list-of-changes" class="anchor" href="#put--json-list-of-changes"><span class="octicon octicon-link"></span></a>PUT  (JSON list of changes)</h4>

<pre><code>?changes=[{"quantity": "+3", "card": "demonic tutor", "board": "side"}]  Adds 3
?changes=[{"quantity": 3, "card": "demonic tutor", "board": "side"}]   Sets to 3
?changes=[{"quantity": 0, "card": "demonic tutor", "board": "side"}]   Removes all
?changes=[{"quantity": -3, "card": "demonic tutor", "board": "side"}]  Removes 3
</code></pre>

<p>Response: A string and status code, aka "OK" 200 or "Error" 400</p>

<h3>
<a name="cube-boosters-public" class="anchor" href="#cube-boosters-public"><span class="octicon octicon-link"></span></a>Cube Boosters [Public]</h3>

<p>URI: /api/collection/cube/<em>cube_slug</em>/booster/?count=X [GET]</p>

<p>count can be anything under 100 and above 0 and an integer</p>

<p>you may pass card_fields as a GET variable if you want a subset of card attributes.</p>

<p>Response:  JSON list of packs in order given, each with a list of cardspecs. </p>

<pre><code>[  # JSON list of packs
   [  # Pack: List of CardSpec (see above)
        {"card_name": "Demonic Tutor" ... },
        {"card_name": "Phyrexian Dreadnought" ... },
   ]
]
</code></pre>

<h2>
<a name="base-resources" class="anchor" href="#base-resources"><span class="octicon octicon-link"></span></a>Base Resources</h2>

<h3>
<a name="tappedout-user-session-developer-access-token" class="anchor" href="#tappedout-user-session-developer-access-token"><span class="octicon octicon-link"></span></a>TappedOut User Session [Developer Access Token]</h3>

<p>Returns a user and their displayname given a valid TappedOut cookie. Bear in mind the 'display' may be an html snippet.</p>

<p>URI: /api/v1/cookie/<em>cookie</em>/</p>

<pre><code>/api/v1/cookie/ffa6b0344df1e8fe775af3dd99df4a6/?access_token=API_ACCESS_TOKEN
</code></pre>

<p>Response:</p>

<pre><code>{
    "user": "Some User Name",
    "display": "&lt;font color=\"blue\"&gt;Some&lt;/font&gt; User Name",
}
</code></pre>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-622331-17");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
